@{
    ViewBag.Title = "Update My Profile - Nofoos.com";
    Layout = "~/Views/shared/MasterPage2.cshtml";
}
<script>

    var ImageInBase64;
    var CertInBase64;
    $().ready(function () {

        $.validator.addMethod("time", function (value, element) {
            return this.optional(element) || /^(([0-1]?[0-9])|([2][0-3])):([0-5]?[0-9])(:([0-5]?[0-9]))?$/i.test(value);
        }, "Please enter a valid time.");

        $("#login").validate({
            rules: {
                time: "required time",
            },

        });

    });
    $(document).ready(function () {

        $('#DImage').change(function (e) {
            readImagesFromUploader(e);
        });
        $('#CImage').change(function (e) {
            C_readImagesFromUploader(e);
        });




        function readImage(file, event) {
            ImageInBase64 = event.target.result.replace("data:image/png;base64,", "");
            ImageInBase64 = ImageInBase64.replace("data:image/jpeg;base64,", "");
            ImageInBase64 = ImageInBase64.replace("data:image/jpg;base64,", "");
            ImageInBase64 = ImageInBase64.replace("data:image/gif;base64,", "");
        }

        function readImages(event) {
            var files = event.originalEvent.dataTransfer.files;
            $.each(files, function (index, file) {
                var fileReader = new FileReader();
                fileReader.onload = (function (file) {
                    return function (event) {
                        return readImage(file, event);
                    }
                })(file);
                fileReader.readAsDataURL(file);
            });
        }

        function readImagesFromUploader(event) {
            var files = event.target.files;
            $.each(files, function (index, file) {
                var fileReader = new FileReader();
                fileReader.onload = (function (file) {
                    return function (event) {
                        return readImage(file, event);
                    }
                })(file);
                fileReader.readAsDataURL(file);
            });
        }


        function C_readImage(file, event) {
            CertInBase64 = event.target.result.replace("data:image/png;base64,", "");
            CertInBase64 = CertInBase64.replace("data:image/jpeg;base64,", "");
            CertInBase64 = CertInBase64.replace("data:image/jpg;base64,", "");
            CertInBase64 = CertInBase64.replace("data:image/gif;base64,", "");
        }

        function C_readImages(event) {
            var files = event.originalEvent.dataTransfer.files;
            $.each(files, function (index, file) {
                var fileReader = new FileReader();
                fileReader.onload = (function (file) {
                    return function (event) {
                        return C_readImage(file, event);
                    }
                })(file);
                fileReader.readAsDataURL(file);
            });
        }

        function C_readImagesFromUploader(event) {
            var files = event.target.files;
            $.each(files, function (index, file) {
                var fileReader = new FileReader();
                fileReader.onload = (function (file) {
                    return function (event) {
                        return C_readImage(file, event);
                    }
                })(file);
                fileReader.readAsDataURL(file);
            });
        }


        $('#DUpdateBasicData').validate({

            rules: {
                Email: {
                    required: true,
                    minlength: 5
                },
                Fname: {
                    required: true,
                    minlength: 0
                },
                Lname: {
                    required: true,
                    minlength: 0
                },
                password: {
                    required: true,
                    minlength: 5
                },
                ConPass: {
                    required: true,
                    equalTo: '#password'
                },
                Phone: {
                    required: true
                },
                Bio: {
                    maxlength: 350
                },
                BioAr: {
                    maxlength: 350
                }
            },
            messages: {
                Email: {
                    required: "please enter your Email",
                    minlength: "5 characters as minimum "
                },
                Fname: {
                    required: "please enter your First Name",
                    minlength: "5 characters as minimum "
                },
                Lname: {
                    required: "please enter your Last Name",
                    minlength: "5 characters as minimum "
                },
                password: {
                    required: "please enter your password",
                    minlength: "5 characters as minimum "
                },
                ConPass: {
                    required: "please Re-type your password",
                    equalTo: "Password mismatch"
                },
                Phone: {
                    required: "please Enter your phone number"
                },
                Bio: {
                    maxlength: "350 Characters allowed As Maximum"
                },
                BioAr: {
                    maxlength: "350 Characters allowed As Maximum"
                }
            },
            submitHandler: function (form) { // for demo
                $(function () {
                    var Email = $('#Email').val();
                    var FirstName = $('#Fname').val();
                    var LastName = $('#Lname').val();
                    var Password = $('#password').val();
                    var phone = $('#Phone').val();
                    var Image = ImageInBase64;
                    var bio = $("#Bio").val();
                    var bioAr = $("#BioAr").val();
                    var lang = $("#Language").val();
                    var title = $("#Title").val();
                    var SP1 = $("#Sp1").find("option:selected").val();
                    if (SP1 == "None") { SP1 = ""; }
                    var SP2 = $("#Sp2").find("option:selected").val();
                    if (SP2 == "None") { SP2 = ""; }
                    var SP3 = $("#Sp3").find("option:selected").val();
                    if (SP3 == "None") { SP3 = ""; }

                    var data = { '_Email': Email, '_FirstName': FirstName, '_LastName': LastName, '_Password': Password, "_Phone": phone, "_ProfileImageLink": Image, "_Bio": bio, "_BioAr": bioAr, "_Title": title, "_SP1": SP1, "_SP2": SP2, "_SP3": SP3, "_Lang": lang };
                    $.ajax({
                        url: '/Doctor/UpdateBasicData',
                        type: 'post',
                        data: data,
                        beforeSend: function () {

                            $("#UPSuccess").fadeOut(0);
                            $("#UPError").fadeOut(0);
                            $("#UPLoader").css({ "display": "block" });
                            $('#UpdateProfileSbumit').attr("disabled", "disabled");
                        },
                        complete: function () {

                            $("#UPLoader").css({ "display": "none" });
                            $('#UpdateProfileSbumit').removeAttr("disabled");
                        },
                        success: function (data) {
                            if (data == 'false') {

                                $("#UPerrorText").html('<p><strong>Message</strong> : Email already exist</p>');
                                $("#UPError").fadeIn(500);
                                scrollTo([0], [0]);
                            }
                            else {


                                $("#UPSuccessText").html('<p><strong>Message</strong> : Updated Successfully</p>');
                                $("#UPSuccess").fadeIn(1000);
                                scrollTo([0], [0]);
                            }
                        },
                        error: function (data) {
                            console.log(data.responseText);
                        }
                    });
                });
            }
        });


        $('#DCerificates').validate({

            rules: {
                CertName: {
                    required: true,
                    minlength: 5
                },
                CertDesc: {
                    required: true,
                    minlength: 0
                },
                CImage: {
                    required: true

                }
            },
            messages: {
                CertName: {
                    required: "please enter Certificate Name",
                    minlength: "5 characters as minimum "
                },
                CertDesc: {
                    required: "please enter Certificate Discription",
                    minlength: "5 characters as minimum "
                },
                CImage: {
                    required: "please Upload Certificate Image"

                }
            },
            submitHandler: function (form) { // for demo
                $(function () {
                    var CertName = $('#CertName').val();
                    var CertDesc = $('#CertDesc').val();
                    var CImage = CertInBase64;



                    var data = { '_CertName': CertName, '_CertDesc': CertDesc, '_CImage': CImage };
                    $.ajax({
                        url: '/Doctor/AddCertificate',
                        type: 'post',
                        data: data,
                        beforeSend: function () {

                            $('#AddCert').attr("disabled", "disabled");
                        },
                        complete: function () {

                            $('#AddCert').removeAttr("disabled");
                        },
                        success: function (data) {
                            if (data == "false") {

                                $("#CertErrorText").html('<p><strong>Message</strong>You Already Have A certificate With the same name</p>');
                                $("#CertError").fadeIn(1000);
                                scrollTo([0], [0]);

                            }
                            else {
                                window.location.href = "/Doctor/UpdateProfile";
                            }
                        },
                        error: function (data) {
                            console.log(data.responseText);
                        }
                    });
                });
            }
        });


        function convertDate(inputFormat) {
            var d = new Date(inputFormat);
            return [d.getDate(), d.getMonth() + 1, d.getFullYear()].join('/');
        }


        $('#EditSessions').validate({

            rules: {
                SDate: {
                    required: true,
                    date: true
                },
                STime: {
                    required: true,
                    time: true
                },
                SDuration: {
                    required: true,
                    number: true,
                    max: 60

                },
                SPrice: {
                    required: true,
                    number: true
                }
            },
            messages: {
                SDate: {
                    required: "please enter Session Date"

                },
                STime: {
                    required: "please enter Session Start Time"
                },
                SDuration: {
                    required: "please enter Session Duration"

                },
                SPrice: {

                    required: "please enter Session Price"
                }
            },
            submitHandler: function (form) { // for demo
                $(function () {
                    var SDate = $('#SDate').val();
                    var STime = $('#STime').val();
                    var SDuration = $("#SDuration").val();
                    var SPrice = $("#SPrice").val();
                    var SType = $("#SType").find("option:selected").val();




                    var data = { '_SDate': SDate, '_STime': STime, "_Duration": SDuration, "_Price": SPrice, "_Type": SType };
                    $.ajax({
                        url: '/Doctor/AddSession',
                        type: 'post',
                        data: data,
                        beforeSend: function () {

                            $('#AddSession').attr("disabled", "disabled");
                        },
                        complete: function () {

                            $('#AddSession').removeAttr("disabled");
                        },
                        success: function (data) {
                            if (data == "TimeError") {
                                $("#STErrorText").html('<p><strong>Message : </strong>Session Time You Entered Overlapped with another session of yours,please choose another time</p>');
                                $("#STError").fadeIn(1000);
                                scrollTo([0], [0]);


                            }
                            else if (data == "Past") {
                                $("#STErrorText").html('<p><strong>Message : </strong>Session Time You Entered is not valid (A past time),please choose another time</p>');
                                $("#STError").fadeIn(1000);
                                scrollTo([0], [0]);
                            }
                            else {
                                var milli = data.Date.replace('/Date(', '');
                                milli = milli.replace(')/', '');
                                var SessionDate = new Date(parseInt(milli));
                                SessionDate = new Date(SessionDate.toISOString());
                                var Day = SessionDate.getDate();
                                var Month = SessionDate.getMonth() + 1;
                                var Year = SessionDate.getFullYear();
                                $("#Sessions").append('<div class="w-actionbox controls_aside color_primary" id="' + data.ID + '" style="width:80%;margin-left:10%;margin-top:5px;">\
                             <div class="w-actionbox-h">\
                             <div class="w-actionbox-text">\
                             <h4>' + Day + "-" + Month + "-" + Year + ' At ' + STime + ':00 | Duration: ' + data.Duration + 'Minutes\
                             </h4>\
                             </div>\
                             <div class="w-actionbox-controls">\
                             <a class="w-actionbox-button g-btn type_primary size_big"  href="javascript:DeleteSession('+ data.ID + ');">\
                             <span>Delete</span>\
                             </a>\
                             </div>\
                             </div>\
                             </div>');

                                window.scrollTo(0, document.body.scrollHeight);
                            }

                        },
                        error: function (data) {
                            console.log(data.responseText);
                        }
                    });
                });
            }
        });




    });

    function DeleteCertificate(ID) {
        var data = { '_CertID': ID };
        $.ajax({
            url: '/Doctor/DeleteCertificate',
            type: 'post',
            data: data,
            beforeSend: function () {


            },
            complete: function () {


            },
            success: function (data) {

                $("#" + ID).fadeOut(500);
            },
            error: function (data) {
                console.log(data.responseText);
            }
        });


    }

    function DeleteSession(ID) {
        var data = { '_ID': ID };
        $.ajax({
            url: '/Doctor/RemoveSession',
            type: 'post',
            data: data,
            beforeSend: function () {


            },
            complete: function () {


            },
            success: function (data) {

                $("#" + ID).fadeOut(500);
            },
            error: function (data) {
                console.log(data.responseText);
            }
        });


    }

</script>
@using GDAL;

<div class="l-main">
    <div class="l-main-h">
        <div class="l-subsection">
            <div class="l-subsection-h">
                <section id="home" class="l-section">
                    <div class="l-subsection-hh g-html i-cf">

                        <div class="w-tabs">
                            <div class="w-tabs-h">

                                <div class="w-tabs-list">
                                    <div class="w-tabs-item active with_icon">
                                        <span class="w-tabs-item-icon"></span>
                                        <span class="w-tabs-item-icon icon-edit"></span>
                                        <span class="w-tabs-item-title">My Basic Data</span>
                                    </div>

                                    <div class="w-tabs-item with_icon">
                                        <span class="w-tabs-item-icon"></span>
                                        <span class="w-tabs-item-icon icon-edit"></span>
                                        <span class="w-tabs-item-title">My Certificates</span>
                                    </div>

                                    <div class="w-tabs-item with_icon">
                                        <span class="w-tabs-item-icon icon-edit"></span>
                                        <span class="w-tabs-item-title">My Sessions</span>
                                    </div>
                                </div>

                                <div class="w-tabs-section active">
                                    <div class="w-tabs-section-title">
                                        <span class="w-tabs-section-title-icon"></span>
                                        <span class="w-tabs-section-title-text">My Basic Data</span>
                                        <span class="w-tabs-section-title-control"><i class="icon-angle-down"></i></span>
                                    </div>
                                    <div class="w-tabs-section-content">
                                        <div class="w-tabs-section-content-h">
                                            <h2 class="highlight"><strong>Basic Data</strong></h2>
                                            <div class="g-alert type_error with_close" id="UPError" style="display: none;">
                                                <div class="g-alert-close">✕ </div>
                                                <div class="g-alert-body" id="UPerrorText">
                                                </div>
                                            </div>
                                            <div class="g-alert type_success with_close" id="UPSuccess" style="display: none;">
                                                <div class="g-alert-close">✕ </div>
                                                <div class="g-alert-body" id="UPSuccessText">
                                                </div>
                                            </div>

                                            <div class="w-form contacts_form">
                                                <div class="w-form-h contacts_form_form">
                                                    <form class="g-form" method="post" id="DUpdateBasicData">
                                                        <div class="g-form-row" id="email_row">
                                                            <div class="g-form-row-label">
                                                                <label class="g-form-row-label-h" for="Email">Email</label>
                                                            </div>
                                                            <div class="g-form-row-field">
                                                                <i class="icon-envelope" style="margin-left: 10px;"></i>
                                                                <input type="email" name="Email" id="Email" value="@ViewBag.CurrentDoctor.Username">
                                                            </div>
                                                            <div class="g-form-row-state" id="email_state"></div>
                                                        </div>
                                                        <div class="g-form-row" id="Dname_row">
                                                            <div class="g-form-row-label">
                                                                <label class="g-form-row-label-h" for="Fname">First Name</label>
                                                            </div>
                                                            <div class="g-form-row-field">
                                                                <i class="icon-user" style="margin-left: 10px;"></i>
                                                                <input type="text" name="Fname" id="Fname" value="@ViewBag.CurrentDoctor.FirstName">
                                                            </div>
                                                            <div class="g-form-row-state" id="Fname_state"></div>
                                                        </div>
                                                        <div class="g-form-row" id="Lname_row">
                                                            <div class="g-form-row-label">
                                                                <label class="g-form-row-label-h" for="Fname">Last Name</label>
                                                            </div>
                                                            <div class="g-form-row-field">
                                                                <i class="icon-user" style="margin-left: 10px;"></i>
                                                                <input type="text" name="Lname" id="Lname" value="@ViewBag.CurrentDoctor.LastName">
                                                            </div>
                                                            <div class="g-form-row-state" id="Lname_state"></div>
                                                        </div>
                                                        <div class="g-form-row" id="pass_row">
                                                            <div class="g-form-row-label">
                                                                <label class="g-form-row-label-h" for="password">Password</label>
                                                            </div>
                                                            <div class="g-form-row-field">
                                                                <i class="icon-lock" style="margin-left: 10px;"></i>
                                                                <input type="password" name="password" id="password" value="@ViewBag.CurrentDoctor.Password">
                                                            </div>
                                                            <div class="g-form-row-state" id="pass_state"></div>
                                                        </div>
                                                        <div class="g-form-row" id="ConPass_row">
                                                            <div class="g-form-row-label">
                                                                <label class="g-form-row-label-h" for="ConPass">Confirm Password</label>
                                                            </div>
                                                            <div class="g-form-row-field">
                                                                <i class="icon-lock" style="margin-left: 10px;"></i>
                                                                <input type="password" name="ConPass" id="ConPass" value="@ViewBag.CurrentDoctor.Password" />
                                                            </div>
                                                            <div class="g-form-row-state" id="ConPass_state"></div>
                                                        </div>
                                                        <div class="g-form-row" id="phone_row">
                                                            <div class="g-form-row-label">
                                                                <label class="g-form-row-label-h" for="Phone">Phone</label>
                                                            </div>
                                                            <div class="g-form-row-field">
                                                                <i class="icon-phone" style="margin-left: 10px;"></i>
                                                                <input type="text" name="Phone" id="Phone" value="@ViewBag.CurrentDoctor.Phone" />
                                                            </div>
                                                            <div class="g-form-row-state" id="Phone_state"></div>
                                                        </div>
                                                        <div class="g-form-row" id="Bio_row">
                                                            <div class="g-form-row-label">
                                                                <label class="g-form-row-label-h" for="Bio">Bio</label>
                                                            </div>
                                                            <div class="g-form-row-field">
                                                                <i class="icon-user" style="margin-left: 10px;"></i>
                                                                <textarea name="Bio" id="Bio">@ViewBag.CurrentDoctor.Bio</textarea>
                                                            </div>
                                                            <div class="g-form-row-state" id="Bio_state"></div>
                                                        </div>
                                                        <div class="g-form-row" id="BioAr_row">
                                                            <div class="g-form-row-label">
                                                                <label class="g-form-row-label-h" for="BioAr">Bio (Arabic)</label>
                                                            </div>
                                                            <div class="g-form-row-field">
                                                                <i class="icon-user" style="margin-left: 10px;"></i>
                                                                <textarea name="BioAr" style="direction:rtl;" id="BioAr">@ViewBag.CurrentDoctor.bioAr</textarea>
                                                            </div>
                                                            <div class="g-form-row-state" id="BioAr_state"></div>
                                                        </div>
                                                        <div class="g-form-row" id="Title_row">
                                                            <div class="g-form-row-label">
                                                                <label class="g-form-row-label-h" for="Title">Title</label>
                                                            </div>
                                                            <div class="g-form-row-field">
                                                                <i class="icon-user" style="margin-left: 10px;"></i>
                                                                <input type="text" name="Title" id="Title" value="@ViewBag.CurrentDoctor.Title" />
                                                            </div>
                                                            <div class="g-form-row-state" id="Title_state"></div>
                                                        </div>
                                                        <div class="g-form-row" id="Sp1_row">
                                                            <div class="g-form-row-label">
                                                                <label class="g-form-row-label-h" for="Sp1">First Speciality</label>
                                                            </div>
                                                            <div class="g-form-row-field">
                                                                <i class="icon-user" style="margin-left: 10px;"></i>
                                                                <select name="Sp1" id="Sp1">
                                                                    <option value="0">None</option>

                                                                    @{
                                                                        int val = 1;
                                                                        foreach (string sp in ViewBag.SPS)
                                                                        {
                                                                            if (@ViewBag.CurrentDoctor.SP1 == val)
                                                                            {
                                                                        <option value="@val" selected="selected">@sp.Replace("9", " ")</option>
                                                                            }
                                                                            else
                                                                            {
                                                                                
                                                                        <option value="@val">@sp.Replace("9", " ")</option>
                                                                            }
                                                                            val++;
                                                                        }
                                                                        
                                                                    }
                                                                </select>

                                                            </div>
                                                            <div class="g-form-row-state" id="Sp1_state"></div>
                                                        </div>
                                                        <div class="g-form-row" id="Sp2_row">
                                                            <div class="g-form-row-label">
                                                                <label class="g-form-row-label-h" for="Sp2">Second Speciality</label>
                                                            </div>
                                                            <div class="g-form-row-field">
                                                                <i class="icon-user" style="margin-left: 10px;"></i>
                                                                <select name="Sp2" id="Sp2">
                                                                    <option value="0">None</option>
                                                                    @{
                                                                        int val2 = 1;
                                                                        foreach (string sp in ViewBag.SPS)
                                                                        {
                                                                            if (@ViewBag.CurrentDoctor.SP2 == val2)
                                                                            {
                                                                        <option value="@val2" selected="selected">@sp.Replace("9", " ")</option>
                                                                            }
                                                                            else
                                                                            {
                                                                                
                                                                        <option value="@val2">@sp.Replace("9", " ")</option>
                                                                            }
                                                                            val2++;
                                                                        }
                                                                        
                                                                    }
                                                                </select>

                                                            </div>
                                                            <div class="g-form-row-state" id="Sp2_state"></div>
                                                        </div>
                                                        <div class="g-form-row" id="Sp3_row">
                                                            <div class="g-form-row-label">
                                                                <label class="g-form-row-label-h" for="Sp1">Third Speciality</label>
                                                            </div>
                                                            <div class="g-form-row-field">
                                                                <i class="icon-user" style="margin-left: 10px;"></i>
                                                                <select name="Sp3" id="Sp3">
                                                                    <option value="0">None</option>
                                                                    @{
                                                                        int val3 = 1;
                                                                        foreach (string sp in ViewBag.SPS)
                                                                        {
                                                                            if (@ViewBag.CurrentDoctor.SP3 == val3)
                                                                            {
                                                                        <option value="@val3" selected="selected">@sp.Replace("9", " ")</option>
                                                                            }
                                                                            else
                                                                            {
                                                                                
                                                                        <option value="@val3">@sp.Replace("9", " ")</option>
                                                                            }
                                                                            val3++;
                                                                        }
                                                                        
                                                                    }
                                                                </select>

                                                            </div>
                                                            <div id="LanguageRow" class="g-form-row">

                                                                <div class="g-form-row-label">
                                                                    <label class="g-form-row-label-h" for="name">
                                                                        Language
                                                                    </label>
                                                                </div>
                                                                <div class="g-form-row-field">
                                                                    <i class="icon-user" style="margin-left: 10px;"></i>
                                                                    <select id="Language" name="Language">
                                                                        @{
                                                                            int valX = 0;
                                                                            foreach (string sp in ViewBag.langs)
                                                                            {
                                                                                if (ViewBag.CurrentDoctor.Language == valX)
                                                                                {
                                                                            <option value="@valX" selected="selected">@sp.Replace("9", " ")</option>
                                                                                }
                                                                                else
                                                                                {
                                                                                
                                                                            <option value="@valX">@sp.Replace("9", " ")</option>
                                                                                }
                                                                                valX++;
                                                                            }
                                                                        
                                                                        }
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="g-form-row-state" id="Sp3_state"></div>
                                                        </div>
                                                        <div class="g-form-row" id="Image_row">
                                                            <div class="g-form-row-label">
                                                                <label class="g-form-row-label-h" for="Image">Personal Photo</label>
                                                            </div>
                                                            <div class="g-form-row-field">

                                                                <input type="file" name="DImage" id="DImage" />
                                                            </div>
                                                            <div class="g-form-row-state" id="DImage_state"></div>
                                                        </div>
                                                        <div class="g-form-row">
                                                            <div class="g-form-row-label"></div>
                                                            <div class="g-form-row-field">
                                                                <button class="g-btn type_primary" id="UpdateProfileSbumit"><span>Update Data</span></button>
                                                                <img id="UPLoader" src="~/content/img/loader.gif" style="margin-left: 100px; display: none; margin-top: -40px;">
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="w-tabs-section">
                                    <div class="w-tabs-section-title">
                                        <span class="w-tabs-section-title-icon"></span>
                                        <span class="w-tabs-section-title-text">My Certificates</span>
                                        <span class="w-tabs-section-title-control"><i class="icon-angle-down"></i></span>
                                    </div>
                                    <div class="w-tabs-section-content">
                                        <div class="w-tabs-section-content-h">

                                            <h2 class="highlight"><strong>Certificates</strong></h2>
                                            <div class="g-alert type_error with_close" id="CertError" style="display: none;">
                                                <div class="g-alert-close">✕ </div>
                                                <div class="g-alert-body" id="CertErrorText">
                                                </div>
                                            </div>
                                            <div class="w-form contacts_form">
                                                <div class="w-form-h contacts_form_form">
                                                    <form class="g-form" method="post" id="DCerificates">
                                                        <div class="g-form-row" id="CertName_row">
                                                            <div class="g-form-row-label">
                                                                <label class="g-form-row-label-h" for="CertName">Certificate Name</label>
                                                            </div>
                                                            <div class="g-form-row-field">
                                                                <i class="icon-user" style="margin-left: 10px;"></i>
                                                                <input type="text" name="CertName" id="CertName" value="">
                                                            </div>
                                                            <div class="g-form-row-state" id="CertName_state"></div>
                                                        </div>
                                                        <div class="g-form-row" id="CertDesc_row">
                                                            <div class="g-form-row-label">
                                                                <label class="g-form-row-label-h" for="CertDesc">Certificate Description</label>
                                                            </div>
                                                            <div class="g-form-row-field">
                                                                <i class="icon-user" style="margin-left: 10px;"></i>
                                                                <textarea name="CertDesc" id="CertDesc"></textarea>
                                                            </div>
                                                            <div class="g-form-row-state" id="CertDesc_state"></div>
                                                        </div>
                                                        <div class="g-form-row" id="CImage_row">
                                                            <div class="g-form-row-label">
                                                                <label class="g-form-row-label-h" for="CImage">Certificate Image</label>
                                                            </div>
                                                            <div class="g-form-row-field">

                                                                <input type="file" name="CImage" id="CImage" value="">
                                                            </div>
                                                            <div class="g-form-row-state" id="CImage_state"></div>
                                                        </div>

                                                        <div class="g-form-row">
                                                            <div class="g-form-row-label"></div>
                                                            <div class="g-form-row-field">
                                                                <button class="g-btn type_primary" id="AddCert"><span>Add Certificate</span></button>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                            <!--certificates-->
                                            <div class="g-cols" style="margin-top: 50px;">
                                                @{
                                                    if (ViewBag.DoctorCertificates != null)
                                                    {
                                                        foreach (Certificates C in ViewBag.DoctorCertificates)
                                                        {
                                                       
                                                
                                               
                                                  
                                                    <div class="one-third" style="margin-left:20px;margin-top:20px;" id="@C.ID">
                                                        <div class="w-iconbox iconpos_top with_circle">

                                                            <div class="w-iconbox-h">
                                                                <div class="w-iconbox-link">
                                                                    <div class="w-gallery size_s">

                                                                        <div class="w-gallery-h">
                                                                            <div class="w-gallery-tnails">
                                                                                <div class="w-gallery-tnails-h">
                                                                                    <a class="w-gallery-tnail" title="@C.CertificateName" href="@C.PhotocopyLink">

                                                                                        <span class="w-gallery-tnail-h">
                                                                                            <img class="w-gallery-tnail-img" alt="@C.CertificateName" src="@C.PhotocopyLink" />
                                                                                            <span class="w-gallery-tnail-hover">
                                                                                                <i class="icon-search"></i>
                                                                                            </span>
                                                                                        </span>

                                                                                    </a>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <h4 class="w-iconbox-title" style="word-wrap: break-word;">@C.CertificateName </h4>
                                                                </div>
                                                                <div class="w-iconbox-text" style="word-wrap: break-word;">@C.Description</div>
                                                                <button class="g-btn type_primary size_small" id="@C.ID" onclick="DeleteCertificate(this.id);">
                                                                    <span>Delete</span>
                                                                </button>
                                                            </div>

                                                        </div>
                                                    </div>
                                                   
                                                   
                                              
                                                
                                                        }

                                                    }
                                                    else
                                                    {

                                                    }
                                                    
                                                }
                                            </div>


                                        </div>
                                    </div>


                                </div>
                                <div class="w-tabs-section with_icon" id="b">
                                    <div class="w-tabs-section-title">
                                        <span class="w-tabs-section-title-icon icon-edit"></span>
                                        <span class="w-tabs-section-title-text">My Sessions</span>
                                        <span class="w-tabs-section-title-control"><i class="icon-angle-down"></i></span>
                                    </div>
                                    <div class="w-tabs-section-content">
                                        <div class="w-tabs-section-content-h">
                                            <h2 class="highlight"><strong>Sessions</strong></h2>
                                            <div class="g-alert type_error with_close" id="STError" style="display: none;">
                                                <div class="g-alert-close">✕ </div>
                                                <div class="g-alert-body" id="STErrorText">
                                                </div>
                                            </div>
                                            <div class="w-form contacts_form">
                                                <div class="w-form-h contacts_form_form">
                                                    <form class="g-form" method="post" id="EditSessions">
                                                        <div class="g-form-row" id="SDate_row">
                                                            <div class="g-form-row-label">
                                                                <label class="g-form-row-label-h" for="SDate">Session Date</label>
                                                            </div>
                                                            <div class="g-form-row-field">

                                                                <input type="text" name="SDate" id="SDate" placeholder="MM/DD/YYY" />
                                                            </div>
                                                            <div class="g-form-row-state" id="SDate_state"></div>
                                                        </div>
                                                        <div class="g-form-row" id="STime_row">
                                                            <div class="g-form-row-label">
                                                                <label class="g-form-row-label-h" for="STime">Session Time</label>
                                                            </div>
                                                            <div class="g-form-row-field">

                                                                <input type="text" name="STime" id="STime" placeholder="hh:mm">
                                                            </div>
                                                            <div class="g-form-row-state" id="STime_state"></div>
                                                        </div>

                                                        <div class="g-form-row" id="SDuration_row">
                                                            <div class="g-form-row-label">
                                                                <label class="g-form-row-label-h" for="SDuration">Session Duration</label>
                                                            </div>
                                                            <div class="g-form-row-field">

                                                                <input type="text" name="SDuration" id="SDuration" placeholder="Duration in minutes">
                                                            </div>
                                                            <div class="g-form-row-state" id="SDuration_state"></div>
                                                        </div>
                                                        <div class="g-form-row" id="SPrice_row">
                                                            <div class="g-form-row-label">
                                                                <label class="g-form-row-label-h" for="SPrice">Session Price</label>
                                                            </div>
                                                            <div class="g-form-row-field">

                                                                <input type="text" name="SPrice" id="SPrice" placeholder="Price in EGP" />
                                                            </div>
                                                            <div class="g-form-row-state" id="SPrice_state"></div>
                                                        </div>
                                                        <div class="g-form-row" id="SType_row">
                                                            <div class="g-form-row-label">
                                                                <label class="g-form-row-label-h" for="SType">Session Type</label>
                                                            </div>
                                                            <div class="g-form-row-field">

                                                                <select name="SType" id="SType">
                                                                    <option value="1">Individual</option>
                                                                    <option value="2" disabled="disabled">Group(soon)</option>

                                                                </select>
                                                            </div>
                                                            <div class="g-form-row-state" id="SType_state"></div>
                                                        </div>

                                                        <div class="g-form-row">
                                                            <div class="g-form-row-label"></div>
                                                            <div class="g-form-row-field">
                                                                <button class="g-btn type_primary" type="submit" id="AddSession"><span>Add Session</span></button>

                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>

                                            <div id="Sessions">
                                                @{
                                                    foreach (Sessions S in ViewBag.DoctorSessions)
                                                    {
                                                    
                                                
                                                    <div class="w-actionbox controls_aside color_primary" id="@S.ID" style="width:80%;margin-left:10%;margin-top:5px;">

                                                        <div class="w-actionbox-h">
                                                            <div class="w-actionbox-text">
                                                                <h4>@S.Date.AddMinutes(-int.Parse(Session["TO"].ToString())).ToString("dd-MM-yyyy") at @S.Date.AddMinutes(-int.Parse(Session["TO"].ToString())).TimeOfDay | Duration: @S.Duration Minutes

                                                                </h4>
                                                            </div>
                                                            <div class="w-actionbox-controls">
                                                                <a class="w-actionbox-button g-btn type_primary size_big"  href="javascript:DeleteSession(@S.ID);">
                                                                    <span>Delete

                                                                    </span>
                                                                </a>
                                                            </div>
                                                        </div>

                                                    </div>
                                                    }
                                                }

                                            </div>


                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div class="g-hr">
                            <span class="g-hr-h">
                                <i class="icon-star"></i>
                            </span>
                        </div>
                    </div>
                </section>
            </div>
        </div>

    </div>

</div>
